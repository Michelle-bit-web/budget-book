import e from"./Errorbox.min.js";import t from"../liqui-planner.min.js";export default class a{constructor(){this._html=this._generate_html()}_get_formular_data(e){return{title:e.target.elements.titel.value,amount:e.target.elements.betrag.value,income:e.target.elements.einnahme.checked,date:e.target.elements.datum.valueAsDate}}_processing_data(e){return{title:e.title.trim(),type:!1===e.income?"ausgabe":"einnahme",amount:100*parseFloat(e.amount),date:e.date}}_validate_data(e){let t=[];return""===e.title?t.push("Titel"):null===e.date?t.push("Datum"):isNaN(e.amount)&&t.push("Betrag"),t}_refresh_date(){let e=document.querySelector("#datum");null!==e&&(e.valueAsDate=new Date)}_send_add_event(a){a.querySelector("#eingabeformular").addEventListener("submit",a=>{a.preventDefault();let i=this._processing_data(this._get_formular_data(a)),r=this._validate_data(i);0===r.length?(t.add_input(i),a.target.reset(),this._refresh_date()):new e("Folgende Felder wurden nicht korrekt ausgef\xfchrt",r).show()})}_generate_html(){let e=document.createElement("section");return e.setAttribute("id","eingabeformular-container"),e.innerHTML=`<form id="eingabeformular" action="#" method="get"></form>
  <div class="eingabeformular-zeile">
    <h1>Neue Einnahme / Ausgabe hinzuf\xfcgen</h1>
  </div>
 
  <div class="eingabeformular-zeile">
    <div class="titel-typ-eingabe-gruppe">
      <label for="titel">Titel</label>
      <input type="text"
        id="titel"
        form="eingabeformular"
        name="titel"
        placeholder="z.B. Einkaufen"
        size="10"
        title="Titel des Eintrags"
        
      />
      <input
        type="radio"
        id="einnahme"
        name="typ"
        value="einnahme"
        form="eingabeformular"
        title="Typ des Eintrags"
      />
      <label for="einnahme" title="Typ des Eintrags">Einnahme</label>
      <input
        type="radio"
        id="ausgabe"
        name="typ"
        value="ausgabe"
        form="eingabeformular"
        title="Typ des Eintrags"
        checked
      />
      <label for="ausgabe" title="Typ des Eintrags">Ausgabe</label>
    </div>
  </div>

  <div class="eingabeformular-zeile">
    <div class="betrag-datum-eingabe-gruppe">
      <label for="betrag">Betrag</label>
      <input
        type="number"
        id="betrag"
        name="betrag"
        form="eingabeformular"
        placeholder="z.B. 10,42"
        size="10"
        step="0.01"
        title="Betrag des Eintrags (max. zwei Nachkommastellen, kein â‚¬-Zeichen)"
        min="0.01"
      />
      <label for="datum">Datum</label>
      <input
        type="date"
        id="datum"
        name="datum"
        form="eingabeformular"
        size="10"
        title="Datum des Eintrags"
        
      />
    </div>
  </div>
 
  <div class="eingabeformular-zeile">
    <button class="standard" type="submit" form="eingabeformular">Hinzuf\xfcgen</button>
  </div>
    `,this._send_add_event(e),e}show(){let e=document.querySelector("#navigationsleiste");null!==e&&(e.insertAdjacentElement("afterend",this._html),this._refresh_date())}};